<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Refer√™ncia Auth</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- TELA DE LOGIN/CADASTRO -->
    <div id="authContainer" class="auth-screen">
        <!-- O conte√∫do ser√° injetado via JS -->
    </div>

    <script>
        // L√ìGICA DE REFER√äNCIA PARA AUTENTICA√á√ÉO
        
        function renderLogin() {
            document.getElementById('authContainer').innerHTML = `
                <div class="auth-box">
                    <h2>üîê Login</h2>
                    <form onsubmit="fazerLogin(event)">
                        <label>Email: <input type="email" id="loginEmail" required></label>
                        <label>Senha: 
                            <div class="password-wrapper">
                                <input type="password" id="loginSenha" required style="padding-right: 35px;">
                                <button type="button" class="toggle-password" onclick="toggleSenha('loginSenha', this)">üëÅÔ∏è</button>
                            </div>
                        </label>
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Entrar</button>
                    </form>
                    <span class="auth-link" onclick="renderCadastro()">N√£o tem conta? Cadastre-se</span>
                </div>
            `;
        }

        function renderCadastro() {
            // Simula√ß√£o de escolas para o select
            let schools = JSON.parse(localStorage.getItem('app_schools') || '[]');
            if (schools.length === 0) {
                schools = [{id: 'teste', nome: 'Escola Exemplo (Local)'}];
            }
            const options = schools.map(s => `<option value="${s.id}">${s.nome}</option>`).join('');

            document.getElementById('authContainer').innerHTML = `
                <div class="auth-box">
                    <h2>üìù Cadastro</h2>
                    <form onsubmit="fazerCadastro(event)">
                        <label>Nome: <input type="text" id="cadNome" required></label>
                        <label>Email: <input type="email" id="cadEmail" required></label>
                        <label>Escola: 
                            <select id="cadEscola" required>
                                <option value="">Selecione sua escola...</option>
                                ${options}
                            </select>
                        </label>
                        <label>Senha: 
                            <div class="password-wrapper">
                                <input type="password" id="cadSenha" required style="padding-right: 35px;">
                                <button type="button" class="toggle-password" onclick="toggleSenha('cadSenha', this)">üëÅÔ∏è</button>
                            </div>
                        </label>
                        <button type="submit" class="btn btn-success" style="width: 100%; margin-top: 10px;">Criar Conta</button>
                    </form>
                    <span class="auth-link" onclick="renderLogin()">J√° tem conta? Fa√ßa Login</span>
                </div>
            `;
        }

        function toggleSenha(inputId, btn) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                btn.textContent = 'üôà';
            } else {
                input.type = 'password';
                btn.textContent = 'üëÅÔ∏è';
            }
        }

        function fazerCadastro(e) {
            e.preventDefault();
            // L√≥gica de salvar usu√°rio (no Firebase ser√° createUserWithEmailAndPassword)
            alert('Cadastro realizado (Simula√ß√£o)');
            renderLogin();
        }

        function fazerLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const senha = document.getElementById('loginSenha').value;

            // Super Admin Check (Refer√™ncia)
            if (email === 'rafael@adm' && senha === 'Amor@9391') {
                alert('Login Admin');
                return;
            }
            
            // L√≥gica de valida√ß√£o (no Firebase ser√° signInWithEmailAndPassword)
            alert('Login simulado para: ' + email);
        }

        // Inicializa√ß√£o
        renderLogin();
    </script>
</body>
</html>